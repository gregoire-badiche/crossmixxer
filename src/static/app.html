<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>song mixxer</title>
    <style>
        @media screen and not (max-width: 600px) {
            #action {
                font-size: 40px;
            }

            #arrow-main, #arrow-l1, #arrow-l2 {
                stroke-width: 2;
            }

            #arrow {
                width: 300px;
            }

            #main-left {
                justify-content: end;
                padding-right: 110px;
            }
            #main-right {
                justify-content: start;
                padding-left: 110px;
            }

            #go {
                width: 500px;
                font-size: 30px;
            }

            #arrow-container {
                width: 270px;
                height: 270px;
            }
        }

        @media screen and (max-width: 600px) {
            #action {
                font-size: 30px;
            }

            #arrow-main, #arrow-l1, #arrow-l2 {
                stroke-width: 3;
            }

            #arrow {
                width: 150px;
            }

            #main {
                width: 100%;
            }

            #main-left, #main-right {
                justify-content: center;
            }

            #go {
                width: calc(50vw + 120px);
                font-size: 20px;
            }

            #arrow-container {
                width: 135px;
                height: 135px;
            }
        }

        body {
            font-family: monospace;
            min-height: 100vh;
            margin: 0;
        }

        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: filter .2s;
        }

        #main {
            display: flex;
            flex-direction: row;
            position: relative;
            margin: 20px 0;
        }

        #main-left, #main-right {
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: row;
            align-items: center;
            text-align: center;
        }

        #arrow-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            overflow: hidden;
            border-radius: 50%;
            cursor: pointer;
        }

        #arrow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #action-container {
            margin: 10px auto;
        }

        #action {
            font-weight: 600;
            border-right: .15em solid #dc143c;
            animation: blink-caret .75s step-end infinite;
        }

        #bottom {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        #go {
            --slant: 20px;
            --slant-2: 10px;
            padding: 10px 20px;
            text-align: center;
            font-weight: 600;
            background: #2E2F60;
            background: repeating-linear-gradient(-45deg, #2E2F60, #2E2F60 10px, #414288 10px, #414288 15px);
            stroke: #000;
            stroke-width: 2px;
            transition: all .2s;
            color: #fff;
            cursor: pointer;
            clip-path: polygon(var(--slant-2) 0, calc(100% - var(--slant)) 0, 100% var(--slant),
                    calc(100% - var(--slant-2)) 100%, var(--slant) 100%,0 calc(100% - var(--slant))
                );
            filter: brightness(150%);
        }

        #go:hover {
            filter: brightness(200%);
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #dc143c; }
        }

        .card {
            row-gap: 10px;
            width: 160px;
            height: 260px;
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: 160px 20px 20px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .card.deezer {
            background-color: #D1A9DB;
            box-shadow: #ab76b9 -5px 5px;
            transition: all .2s;
        }
        .card.deezer:hover {
            box-shadow: #ab76b9 -10px 10px;
        }

        .card.spotify {
            background-color: #5dd99f;
            box-shadow: #30a46e -5px 5px;
            transition: all .2s;
        }
        .card.spotify:hover {
            box-shadow: #30a46e -10px 10px;
        }

        .card-img {
            position: relative;
        }

        .card-img > img {
            border-radius: 5px 5px 0 0;
            filter: brightness(50%);
        }

        .card-img-main {
            width: 100%;
        }

        .card-link {
            width: 140px;
            border: 0;
            margin: 5px;
            padding: 0 5px;
            height: 20px;
            border-radius: 0 0 5px 5px;
            font-style: italic;
            font-family: monospace;
            font-weight: 600;
        }

        .deezer .card-link {
            background-color: #E8D4ED;
        }
        .deezer .card-link:focus {
            outline: #723681 solid 2px;
        }

        .spotify .card-link {
            background-color: #ACECCE;
        }

        .spotify .card-link:focus {
            outline: #229660 solid 2px;
        }

        .title {
            color: #fff;
            padding: 8px;
            position: absolute;
            top: 0;
            left: 0;
            overflow: hidden;
            font-weight: 600;
            font-size: 23px;
            text-align: left;
        }

        .card-img-sec {
            position: absolute;
            right: 0;
            bottom: 0;
            width: 32px;
            height: 32px;
            padding: 2px;
            background-color: #fff;
            margin: 0;
        }

        .card-img-sec > img {
            width: 30px;
            height: 30px;
        }

        .origin {
            font-size: 12px;
            display: flex;
            color: #2a2a2a;
            flex-direction: column;
            justify-content: center;
        }

        .infos {
            font-size: 13px;
        }

        #modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            justify-content: center;
            align-items: center;
            background-color: transparent;
        }

        #modal {
            background-color: #fff;
            padding: 20px;
            box-shadow: #00000059 0px 5px 15px;
            border-radius: 10px;
            margin: 20px;
            position: relative;
            max-width: calc(100vw - 80px);
            max-height: calc(100vh - 80px);
        }

        #close-modal {
            width: 27px;
            height: 27px;
            position: absolute;
            top: 10px;
            right: 10px;
            border-radius: 50%;
            transition: background-color .2s;
            border: 2px solid #000;
            text-align: center;
            cursor: pointer;
        }
        #close-modal:hover {
            background-color: #ACECCE;
        }
        #close-modal::after {
            content: '×';
            font-size: 20px;
        }

        body[modal="on"] #app {
            filter: blur(5px);
        }

        @keyframes popout {
            from{transform:scale(0)}
            80%{transform:scale(1.05)}
            to{transform:scale(1)}
        }
        @keyframes popout-bis {
            from{transform:scale(1)}
            20%{transform:scale(1.05)}
            to{transform:scale(0)}
        }

        body[modal="off"] #modal {
            animation: popout-bis .2s ease-in forwards;
        }

        body[modal="on"] #modal {
            animation: popout .2s ease-out forwards;
        }

        
    </style>
    <style>
        @keyframes arrowdot0 {
            from {
                d: path("M50,50a0,0,0 0 1,0,0");
            }
            to {
                d: path("M83,50a0,0,0 0 1,0,0");
            }
        }

        @keyframes arrowdot1 {
            from {
                d: path("M83,50a0,0,0 0 1,0,0");
            }
            to {
                d: path("M17,50a0,0,0 0 1,0,0");
            }
        }

        @keyframes arrowdot2 {
            from {
                d: path("M17,50a0,0,0 0 1,0,0");
            }
            to {
                d: path("M50,50a0,0,0 0 1,0,0");
            }
        }

        #arrow[state="1"] #arrow-dot {
            animation: arrowdot0 .5s forwards 1;
        }

        #arrow[state="2"] #arrow-dot {
            animation: arrowdot1 .5s forwards 1;
        }

        #arrow[state="0"] #arrow-dot {
            animation: arrowdot2 .5s forwards 1;
        }

        @keyframes arrowline10 {
            from {
                d: path("M80,47L70,37");
            }
            to {
                d: path("M80,47L70,37");
            }
        }

        @keyframes arrowline11 {
            from {
                d: path("M80,47L70,37");
            }
            to {
                d: path("M30,37L20,47");
            }
        }

        @keyframes arrowline12 {
            from {
                d: path("M30,37L20,47");
            }
            to {
                d: path("M80,47L70,37");
            }
        }

        #arrow[state="1"] #arrow-l1 {
            animation: arrowline10 .5s forwards 1;
        }

        #arrow[state="2"] #arrow-l1 {
            animation: arrowline11 .5s forwards 1;
        }

        #arrow[state="0"] #arrow-l1 {
            animation: arrowline12 .5s forwards 1;
        }

        @keyframes arrowline20 {
            from {
                d: path("M20,53L30,63");
            }
            to {
                d: path("M70,63L80,53");
            }
        }

        @keyframes arrowline21 {
            from {
                d: path("M70,63L80,53");
            }
            to {
                d: path("M20,53L30,63");
            }
        }

        @keyframes arrowline22 {
            from {
                d: path("M20,53L30,63");
            }
            to {
                d: path("M20,53L30,63");
            }
        }

        #arrow[state="1"] #arrow-l2 {
            animation: arrowline20 .5s forwards 1;
        }

        #arrow[state="2"] #arrow-l2 {
            animation: arrowline21 .5s forwards 1;
        }

        #arrow[state="0"] #arrow-l2 {
            animation: arrowline22 .5s forwards 1;
        }

        #arrow-circle {
            transition: all .2s;
            stroke-width: 20;
        }
        #arrow:hover #arrow-circle {
            stroke-width: 30;
        }

        #arrow-circle-bg {
            fill: #ffffff88;
            transition: all .2s;
        }
        #arrow-container:hover #arrow-circle-bg {
            fill: #ffffff;
        }
    </style>
</head>
<body modal="off">
    <div id="app">
        <div id="action-container">
            <span id="action">Merge playlists</span>
        </div>
        <div id="main">
            <div id="main-left">
                <div class="card deezer">
                    <div class="card-img">
                        <img src="https://picsum.photos/160?random=0" class="card-img-main" onerror="this.style.display='none'">
                        <div class="title">Type Deezer playlist link below</div>
                    </div>
                    <div class="origin">
                        <span>
                            ♫
                        </span>
                    </div>
                    <div class="infos">0 tracks • 00:00:00</div>
                    <input type="text" name="link1" id="link1" class="card-link" placeholder="Deezer's link">
                </div>
            </div>
            <div id="main-right">
                <div class="card spotify">
                    <div class="card-img">
                        <img src="https://picsum.photos/160?random=1" class="card-img-main" onerror="this.style.display='none'">
                        <div class="title">Type Spotify playlist link below</div>
                    </div>
                    <div class="origin">
                        <span>
                            ♫
                        </span>
                    </div>
                    <div class="infos">0 tracks • 00:00:00</div>
                    <input type="text" name="link2" id="link2" class="card-link" placeholder="Spotify's link">
                </div>
            </div>
            <div id="arrow-container">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" id="arrow" preserveAspectRatio="xMidYMid meet">
                    <circle cx="50" cy="50" r="45" id="arrow-circle-bg" />
                    <path d="M50,50a0,0,0 0 1,0,0" style="stroke:#dc143c00" stroke-linecap="round" id="arrow-circle" />
                    <path d="M20,47L80,47M20,53L80,53" style="stroke:#000;" stroke-linecap="round" id="arrow-main" />
                    <path d="M80,47L70,37" style="stroke:#000;" stroke-linecap="round" id="arrow-l1" />
                    <path d="M20,53L30,63" style="stroke:#000;" stroke-linecap="round" id="arrow-l2" />
                    <path d="M50,50a0,0,0 0 1,0,0" style="stroke:#000;stroke-width:2;" stroke-linecap="round" id="arrow-dot" />
                </svg>
            </div>
        </div>
        <div id="bottom">
            <span id="go">Let's go!</span>
        </div>
    </div>
    <div id="modal-container" style="display: flex;">
        <div id="modal">
            <div id="modal-playlist">
                <div id="playlist-card">
                    
                </div>
                <div id="playlist-songs">

                </div>
            </div>
            <div id="close-modal" onclick="togglemodal()"></div>
        </div>
    </div>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            var arrow = document.getElementById('arrow');
            var state = 0;
            var isRunning = 0;
            var phrase = new Phrase();
            arrow.onclick = () => {
                if(isRunning == 0) {
                    isRunning = 1;
                    state += 1;
                    state %= 3;
                    arrow.setAttribute("state", state);
                    phrase.changephrase(state);
                    setTimeout(() => {
                        isRunning = 0;
                    }, 500);
                }
            }

            var modalcontainer = document.getElementById('modal-container');
            modalcontainer.onclick = (e) => {
                if (e.target == modalcontainer) {
                    togglemodal();
                }
            }
            modalcontainer.style.display = 'none';
        });

        const WRITING_SPEED = 40;

        class Phrase {
            constructor() {
                this.phrases = [
                    "Merge playlists".split(""),
                    "Import to Spotify".split(""),
                    "Import to Deezer".split(""),
                ]
                this.t = document.getElementById('action').innerText.split('');
                this.l = this.t.length;
                this.interval;
                this.state = 0;
                this.index = 0;
            }

            write(_this) {
                var p = _this.phrases[_this.state];
                if(_this.index < p.length) {
                    _this.t.push(p[_this.index]);
                    _this.index += 1
                    document.getElementById('action').innerText = _this.t.join('');
                } else {
                    clearInterval(_this.interval);
                }
            }

            erase(_this) {
                _this.t.pop();
                document.getElementById('action').innerText = _this.t.join('');
                if(_this.t.length == 0) {
                    clearInterval(_this.interval);
                    _this.index = 0;
                    _this.interval = setInterval(() => { _this.write(_this) }, WRITING_SPEED);
                }
            }

            changephrase(state) {
                this.t = document.getElementById('action').innerText.split('');
                this.l = this.t.length;
                this.index = 0;
                this.state = state;
                clearInterval(this.interval);
                this.interval = setInterval(() => { this.erase(this); }, WRITING_SPEED);
            }
        }

        class Music {
            constructor(title, artists, album, duration, thumbnail) {
                this.title = title;
                this.artists = artists;
                this.album = album;
                this.duration = duration;
                this.thumbnail = thumbnail;
            }
            getDurationAsString() {
                return '00:00'
            }
        }

        class Playlist {
            constructor() {
                this.musics = {
                    natives: [],
                    added: [],
                    errors: [],
                }
            }
        }

        var modalactive = 0;

        const togglemodal = () => {
            if(modalactive) {
                document.body.setAttribute('modal', 'off');
                setTimeout(() => {
                    document.getElementById('modal-container').style.display = 'none';
                }, 200)
                modalactive = 0;
            } else {
                document.body.setAttribute('modal', 'on');
                document.getElementById('modal-container').style.display = 'flex';
                modalactive = 1;
            }
        }
    </script>
</body>
</html>